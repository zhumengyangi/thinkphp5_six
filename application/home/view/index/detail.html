<!DOCTYPE html>
<!--[if IE]>
<![endif]-->
<!--[if IE 8 ]>
<html dir="ltr" lang="zh-CN" class="ie8">
  <![endif]-->
  <!--[if IE 9 ]>
  <html dir="ltr" lang="zh-CN" class="ie9">
    <![endif]-->
    <!--[if (gt IE 9)|!(IE)]>
    <!-->
    <html dir="ltr" lang="zh-CN">
      <!--<![endif]-->
<head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>BuyPlus(败家Shopping）</title>
      <meta name="description" content="BuyPlus(败家Shopping）" />
      <meta name="keywords" content= "BuyPlus(败家Shopping）" />
      <script src="/static/catalog/view/theme/gd-free/javascript/jquery-1.11.3.min.js" type="text/javascript"></script>
      <link href="/static/catalog/view/javascript/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen" />
      <script src="/static/catalog/view/javascript/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
      <link href="/static/catalog/view/javascript/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
      <link href="/static/catalog/view/theme/gd-free/stylesheet/stylesheet.css" rel="stylesheet">
      <link href="/static/catalog/view/theme/gd-free/javascript/owl-carousel2/owl.carousel.css" type="text/css" rel="stylesheet" media="screen" />
      <link href="/static/catalog/view/javascript/jquery/owl-carousel/owl.transitions.css" type="text/css" rel="stylesheet" media="screen" />
      <script src="/static/catalog/view/theme/gd-free/javascript/common.js" type="text/javascript"></script>
      <link href="/static/image/catalog/cart.png" rel="icon" />
      <script src="/static/catalog/view/theme/gd-free/javascript/owl-carousel2/owl.carousel.min.js" type="text/javascript"></script>
     
</head>
      <nav id="top">
        <div class="container">
          <div id="top-links" class="nav pull-right">
            <ul class="list-inline">
              <li>
                <a href=""> <i class="fa fa-phone"></i>
                </a>
                <span class="hidden-xs hidden-sm hidden-md">123456789</span>
              </li>
              <li class="dropdown">
                <a href="" title="会员中心" class="dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-user"></i>
                  <span class="hidden-xs hidden-sm hidden-md">会员中心</span>
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right">
                  <li>
                    <a href="">会员注册</a>
                  </li>
                  <li>
                    <a href="">会员登录</a>
                  </li>
                </ul>
              </li>
              <li>
                <a href="" id="wishlist-total" title="收藏（0）">
                  <i class="fa fa-heart"></i>
                  <span class="hidden-xs hidden-sm hidden-md">收藏（0）</span>
                </a>
              </li>
              <li>
                <a href="" title="购物车">
                  <i class="fa fa-shopping-cart"></i>
                  <span class="hidden-xs hidden-sm hidden-md">购物车</span>
                </a>
              </li>
              <li>
                <a href="" title="结账">
                  <i class="fa fa-share"></i>
                  <span class="hidden-xs hidden-sm hidden-md">结账</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <header>
<body class="common-home">
        <div class="container">
          <div class="row">
            <div class="col-sm-4">
              <div id="logo">
                <a href="">
                  <img src="/static/image/catalog/logo3.png" title="BuyPlus(败家Shopping）" alt="BuyPlus(败家Shopping）" class="img-responsive" />
                </a>
              </div>
            </div>
            <div class="col-sm-8 mini-cart">
              <div id="cart">
                <a href="" class="cart-info">
                  <span class="cart-icon">
                    <i class="fa fa-shopping-cart"></i>
                  </span>
                  <span id="cart-total">0 个商品 - ￥0.00</span>
                </a>
                <ul class="cart-content dropdown-menu hidden-sm hidden-xs">
                  <li>
                    <p class="text-center empty">您的购物车内没有商品！</p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div class="main-menu-wrapper" id="menu">
        <div class="container">
          <div class="main-menu-mobile">
            菜单
            <span class="main-menu-toggle">
              <i class="fa fa-bars"></i>
            </span>
          </div>
          <div class="main-menu-container">
            <ul class="main-menu">
              <li class="parent" v-for="nav in nav_list">
                <a :href="nav.url" target="_blank">{{nav.name}}</a>
              </li>
            </ul>
          </div>
          <script>
          $('.sub-menu>li').mouseenter(function(e){
            $(this).parent().find('ul.second-menu').hide().eq($(this).index()).show();
          });
          </script>
          <div id="search" class="input-group">
            <input type="text" name="search" value="" placeholder="搜索" class="form-control" />
            <span class="input-group-btn">
              <button type="button" class="btn btn-primary">
                <i class="fa fa-search"></i>
              </button>
            </span>
          </div>
        </div>
      </div>

      <div class="container" id="detail">
        <input type="hidden" name="gid" value="{$gid}">
        <ul class="breadcrumb">
          <li>
            <a href="index.php?route=common/home">
              <i class="fa fa-home"></i>
            </a>
          </li>
          <li>
            <a href="index.php?route=product/product&amp;product_id=61">{{goods_detail.goods_name}} </a>
          </li>
        </ul>
        <div class="row">
          <div id="content" class="product-detail col-sm-12">
            <div class="row">
              <div class="col-sm-5">
                <!--elevate zoom start-->
                <div class="elevate-zoom-wrapper">
                  <div class="elevate-zoom-preview">
                    <a href="javascript:;">
                      <img id="elevate-zoom" src="/static/image/cache/catalog/gd/product/yanjing3-300x300.jpg" data-zoom-image="/static/image/cache/catalog/gd/product/yanjing3-500x500.jpg" class="img-responsive">
                    </a>
                    <!--  vcxcxcx     -->
                  </div>
                  <div id="product-thumbnail-gallery">
                     <a data-zoom-image="/static/image/cache/catalog/gd/product/yanjing3-500x500.jpg" data-image="/static/image/cache/catalog/gd/product/yanjing3-300x300.jpg" data-upate="" class="elevatezoom-gallery active" href="/static/image/cache/catalog/gd/product/yanjing3-500x500.jpg">
                      <img src="/static/image/cache/catalog/gd/product/yanjing3-300x300.jpg" width="60">
                    </a>
      
                    <a v-for="(g_img,key) in goods_image"  :data-zoom-image="g_img.image_url" :data-image="g_img.image_url" data-upate="" class="elevatezoom-gallery" :href="g_img.image_url">
                      <img :src="g_img.image_url" width="60">
                    </a>

                   
                    <!-- <a data-zoom-image="/static/image/cache/catalog/gd/product/yanjing6-500x500.jpg" data-image="/static/image/cache/catalog/gd/product/yanjing6-300x300.jpg" data-upate="" class="elevatezoom-gallery" href="/static/image/cache/catalog/gd/product/yanjing6-500x500.jpg">
                      <img src="/static/image/cache/catalog/gd/product/yanjing6-300x300.jpg" width="60">
                    </a> -->
                  </div>
                </div>
                <!--elevate zoom end--> </div>
              <div class="col-sm-7 product-info">
                <h1>{{goods_detail.goods_name}}</h1>
                <ul class="product-brief-wrapper">
                  <li>
                    <span>型  号</span>
                    {{goods_detail.type}}
                  </li>
                  <li>
                    <span>奖励积分</span>
                    {{goods_detail.score}}
                  </li>
                  <li>
                    <span>库存状态</span>
                    <a v-if="goods_detail.store_num <=5"> 缺货啦亲</a><a v-else>有现货</a>
                  </li>
                </ul>
                <div class="product-price-wrapper">
                  <span class="price-new">￥{{goods_detail.market_price}}</span>
                  <span class="price-old">￥{{goods_detail.shop_price}}</span>
                  <!-- <span>消费积分 100</span> -->
                </div>
                <hr>
                <div id="product">
                  <hr>
                  <div class="product-cart-action">
                    <div class="quantity-input-wrapper">
                      <input type="text" name="quantity" value="1" placeholder="数量" id="input-quantity" class="form-control" />
                      <a href="#" class="quantity-up">+</a>
                      <a href="#" class="quantity-down">-</a>
                    </div>
                    <button type="button" id="button-cart" data-loading-text="正在加载..." class="btn btn-primary">加入购物车</button>
                    <input type="hidden" name="product_id" value="61" />
                  </div>
                </div>
                <div class="wishlist-share">
                  <a onclick="wishlist.add('61');">
                    <i class="fa fa-heart"></i>
                    收藏
                  </a>
                  <a onclick="compare.add('61');">
                    <i class="fa fa-link"></i>
                    对比
                  </a>
                </div>
                <div class="rating">
                  <p>
                    <span class="fa fa-stack">
                      <i class="fa fa-star on fa-stack-1x"></i>
                    </span>
                    <span class="fa fa-stack">
                      <i class="fa fa-star on fa-stack-1x"></i>
                    </span>
                    <span class="fa fa-stack">
                      <i class="fa fa-star on fa-stack-1x"></i>
                    </span>
                    <span class="fa fa-stack">
                      <i class="fa fa-star on fa-stack-1x"></i>
                    </span>
                    <span class="fa fa-stack">
                      <i class="fa fa-star off fa-stack-1x"></i>
                    </span>
                    <a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">0 评价</a>
                    /
                    <a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">如果您对本商品有什么问题或经验，请在此留下您的意见和建议！</a>
                  </p>
                  <hr>
                  <!-- Baidu Share BEGIN -->
                  <div class="bdsharebuttonbox">
                    <a href="#" class="bds_more" data-cmd="more">分享到：</a>
                    <a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a>
                    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a>
                    <a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a>
                    <a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a>
                    <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a>
                  </div>
                  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
                  <!-- Baidu Share END --> 
                </div>
              </div>
            </div>
            <ul class="nav nav-tabs">
              <li class="active">
                <a href="#tab-description" data-toggle="tab">商品描述</a>
              </li>
              <li>
                <a href="#tab-specification" data-toggle="tab">商品属性</a>
              </li>
              <li>
                <a href="#tab-review" data-toggle="tab">商品评价 (已有N条评价)</a>
              </li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="tab-description">
                <img src="image/catalog/gd/product/yanjing3-xq1.jpg">
              </div>

              <div class="tab-pane" id="tab-specification">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <td colspan="2"> <strong>Processor</strong>
                      </td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Clockspeed</td>
                      <td>100mhz</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="tab-pane" id="tab-review">
                <form class="form-horizontal" id="form-review">
                  <div id="review"></div>
                  <h2>如果您对本商品有什么问题或经验，请在此留下您的意见和建议！</h2>
                  <div class="form-group required">
                    <div class="col-sm-12">
                      <label class="control-label" for="input-review">您的评价</label>
                      <textarea name="content" rows="5" id="input-review" class="form-control"></textarea>
                      <div class="help-block">
                        <span class="text-danger">注意</span>
                        评论内容不支持HTML代码！
                      </div>
                    </div>
                  </div>
                  <div class="form-group required">
                    <div class="col-sm-12">
                      <label class="control-label">顾客评分</label>
                      &nbsp;&nbsp;&nbsp; 差评&nbsp;
                      <input type="radio" name="rating" value="1" />
                      &nbsp;
                      &nbsp;好评
                      <input type="radio" name="rating" value="2" />
                    </div>
                  </div>
                  <div class="buttons clearfix">
                    <div class="pull-right">
                      <button type="button" id="button-review" v-on:click="goods_comment" data-loading-text="正在加载..." class="btn btn-primary">提交评价</button>
                    </div>
                  </div>
                </form>
                <div>
                  <table>
                    <thead>
                      <th>ID</th>
                      <th>内容</th>
                      <th>添加时间</th>
                      <th>操作</th>
                    </thead>
                     
                    <tr v-for="comment in comment_list">
                      <td>{{comment.id}}</td>
                      <td>{{comment.content}}</td>
                      <td>{{comment.created_at}}</td>
                      <td><button v-on:click="commentDel(comment.id)">删除</button></td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <script src="/static/catalog/view/theme/gd-free/javascript/jquery.elevateZoom.min.js" type="text/javascript"></script>
      <script src="/static/catalog/view/theme/gd-free/javascript/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>
      <script type="text/javascript"><!--
        $(document).ready(function(){
          if ($(window).width() >= 768) {
            $('#elevate-zoom').elevateZoom({
               zoomWindowFadeIn: 500,//镜头窗口淡入速度 
              zoomWindowFadeOut: 500,//镜头窗口淡出速度 
              lensFadeIn: 500,//透镜淡入速度 
              lensFadeOut: 500,//透镜淡出速度 
              // lensShape: 'basic',
              // lensSize: 150,
              zoomWindowOffetx: 10,
              // zoomWindowWidth: 450,
              // zoomWindowHeight: 450,
              borderSize: 1,
              borderColour: '#eaeaea',
              gallery: 'product-thumbnail-gallery',
              galleryActiveClass: 'active',
              cursor:'pointer',
            });

            $('#elevate-zoom').bind('click', function(e) {
              var ez = $('#elevate-zoom').data('elevateZoom');
              $.fancybox(ez.getGalleryList());
              return false;
            });
          } else {
            $('.elevatezoom-gallery').fancybox();
            $('.elevate-zoom-preview a').bind('click', function(e) {
              $('.elevatezoom-gallery').eq(0).trigger('click');
              return false;
            });
          }
        });
      //--></script>

      <script type="text/javascript"><!--
      $('#button-cart').on('click', function() {
      });
      //--></script>

      <script type="text/javascript"><!--
      $('#review').delegate('.pagination a', 'click', function(e) {
          e.preventDefault();

          $('#review').fadeOut('slow');

          $('#review').load(this.href);

          $('#review').fadeIn('slow');
      });

      // $('#review').load('');

      $('#button-review').on('click', function() {
      });

      $("#product select[name*='option']").change(function(){
      });

      $("#product input[type='radio'], #product input[type='checkbox']").on("click",function(){
      });

      $('.quantity-input-wrapper a').click(function(e){
        e.preventDefault();
        if( $(this).hasClass('quantity-up')) {
          $('#input-quantity').val( parseInt($('#input-quantity').val()) + 1 );
        } else {
          if( parseInt($('#input-quantity').val())  > 1 ) {
            $('#input-quantity').val( parseInt($('#input-quantity').val()) - 1 );
          }
        }
      });

      $("#product input[name*=\'quantity\']").keyup(function() {
      });

      $("#product input[name*=\'quantity\']").on("focusout", function(){
      });

      function refresh_price()
      {

      }
      //--> </script>
     
       <script type="text/javascript" src="/static/js/vue.js"></script>
        <script type="text/javascript" src="/static/js/md5.js"></script>
      <script type="text/javascript">
        //创建sign签名
      function createSign(query){
            var sercet = '1q2w3e!@#'; //双方约定加密的秘钥

            var string = query+sercet;

            return hex_md5(string);
        }
         //导航栏对象
      var menu = new Vue({
        el: "#menu",
        data: {
          nav_list:[]
        },

        //构造函数
        created: function(){
          this.getNavList();
        },
        //自定义函数类
        methods: {
          //获取导航栏接口
          getNavList: function(){
            var that = this;
             var query = 'nav_num=4';//传递的参数拼接url模式

            var sign = createSign(query);//客户端生成签名
            $.ajax({
              url: "http://api.six.com/api/home/nav",
              type: "post",
              dataType: "json",
              data: {nav_num:4,sign:sign},
              success: function(res){
                if(res.code == 2000){
                  that.nav_list = res.data;
                }

              },
              error: function(res){

              }
            })
          }

        }
      });

      //商品详情对象
      var detail = new Vue({
        el: "#detail",
        data: {
          goods_detail: [],
          goods_image: [],
          comment_list: [],
        },
        created: function(){
          this.getGoodsDetail();
          this.commentList();
        },

        methods: {

          getGoodsDetail: function(){
            var that = this;
            var gid = $("input[name=gid]").val();//获取sp的id值
            $.ajax({
              url: "http://api.six.com/api/products/detail",
              type: "post",
              dataType: "json",
              data: {gid:gid},
              success: function(res){
                if(res.code == 2000){
                  that.goods_detail = res.data.goods;
                  that.goods_image = res.data.goods_image;
                }


              },
              error: function(res){

              }
            })
          },
          //商品评价
          goods_comment: function(){
            var that = this;
            var gid = $("input[name=gid]").val();//获取sp的id值
            var content = $("#input-review").val();
            var rating = $("input[name=rating]:checked").val();

            if(content == ''){
              alert('评论内容不能为空');
              return false;
            }

            //生成签名
            var query = "goods_id="+gid+"&content="+content+"&c_type="+rating;
            var sign = createSign(query);

            $.ajax({
              url: "http://api.six.com/api/products/comment",
              type: "post",
              dataType: "json",
              data: {goods_id:gid, content:content,c_type:rating, sign:sign},
              success: function(res){
                if(res.code == 2000){
                  that.commentList();
                }else{
                  alert(res.msg);
                }


              },
              error: function(res){

              }
            })


          },
          //评论列表接口
          commentList: function(){
            var that = this;
             var gid = $("input[name=gid]").val();//获取sp的id值
            $.ajax({
              url: "http://api.six.com/api/products/comment_list",
              type: "post",
              dataType: "json",
              data: {g_id:gid},
              success: function(res){
                if(res.code == 2000){
                  that.comment_list = res.data;
                }else{
                  alert(res.msg);
                }


              },
              error: function(res){

              }
            })
          },
          //删除评论
          commentDel: function(id){
            var that = this;
             //alert(id);return false;
            $.ajax({
              url: "http://api.six.com/api/products/delComment",
              type: "post",
              dataType: "json",
              data: {id:id},
              success: function(res){
                if(res.code == 2000){
                  that.commentList();
                }else{
                  alert(res.msg);
                }


              },
              error: function(res){

              }
            })
          },
        }
      })
      </script>
</body>
    </html>